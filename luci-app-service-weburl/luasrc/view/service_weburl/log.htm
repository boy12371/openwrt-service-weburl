<%+header%>
<div class="cbi-map">
    <h2><%:Service WebURL Logs%></h2>
    <div class="cbi-map-descr"><%:View history of service modifications%></div>

    <% if #logs == 0 then %>
    <div class="cbi-section">
        <div class="cbi-section-node">
            <p><%:No logs found%></p>
        </div>
    </div>
    <% else %>
    <div class="cbi-section">
        <div class="log-container">
            <% for _, log in ipairs(logs) do %>
            <div class="log-entry log-<%=log.action:lower()%>">
                <div class="log-header">
                    <span class="log-action"><%=log.action%></span>
                    <span class="log-timestamp"><%=os.date("%Y-%m-%d %H:%M:%S", log.timestamp)%></span>
                </div>
                <div class="log-message"><%=log.message%></div>
                <% if log.service_id then %>
                <div class="log-service">
                    <%:Service ID%>: <%=log.service_id%>
                </div>
                <% end %>
            </div>
            <% end %>
        </div>
    </div>
    <% end %>

    <div class="cbi-page-actions">
        <a href="<%=luci.dispatcher.build_url('admin/services/service_weburl')%>" class="cbi-button cbi-button-reset">
            <%:Back to Services%>
        </a>
    </div>
</div>

<style type="text/css">
.log-container {
    margin: 1rem 0;
}

.log-entry {
    padding: 1rem;
    margin-bottom: 0.5rem;
    border-radius: 4px;
    background: #fff;
    border-left: 4px solid #ccc;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.log-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    font-weight: bold;
}

.log-timestamp {
    color: #666;
    font-size: 0.9rem;
}

.log-message {
    margin: 0.5rem 0;
}

.log-service {
    font-size: 0.9rem;
    color: #666;
}

.log-create {
    border-left-color: #5cb85c;
}

.log-update {
    border-left-color: #5bc0de;
}

.log-delete {
    border-left-color: #d9534f;
}
</style>
<%+footer%>