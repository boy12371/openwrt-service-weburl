<%+cbi/valueheader%>
<div class="cbi-map">
    <h2><%:Service List%></h2>
    <% for _, service in ipairs(self.services) do %>
    <div class="cbi-section">
        <div class="cbi-section-descr">
            <h3><%=service.title%></h3>
            <p><%=service.description%></p>
            <a href="<%=service.url%>" target="_blank" class="btn cbi-button-action"><%:Visit%></a>
            <a href="<%=luci.dispatcher.build_url('admin/services/service_weburl/edit', service.id)%>" class="btn cbi-button-edit"><%:Edit Service%></a>
        </div>
    </div>
    <button onclick="confirmDelete('<%=service.id%>')" class="btn cbi-button-delete"><%:Delete%></button>
    <% end %>
    <div class="cbi-page-actions">
        <a href="<%=luci.dispatcher.build_url('admin/services/service_weburl/settings')%>" class="cbi-button cbi-button-settings"><%:Application Settings%></a>
    </div>
</div>
<script>
function confirmDelete(id) {
if (confirm("<%:Confirm delete this service?%>")) {
    XHR.post('<%=luci.dispatcher.build_url("admin/services/service_weburl/delete")%>', 
             { id: id }, 
             () => location.reload())
}
}
</script>
<%+cbi/valuefooter%>
